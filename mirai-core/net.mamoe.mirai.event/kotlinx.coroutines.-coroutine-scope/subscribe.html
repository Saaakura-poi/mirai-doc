<HTML>
<HEAD>
<meta charset="UTF-8">
<title>subscribe - mirai-core</title>
<link rel="stylesheet" href="../../../style.css">
</HEAD>
<BODY>
<a href="../../index.html">mirai-core</a>&nbsp;/&nbsp;<a href="../index.html">net.mamoe.mirai.event</a>&nbsp;/&nbsp;<a href="index.html">kotlinx.coroutines.CoroutineScope</a>&nbsp;/&nbsp;<a href="./subscribe.html">subscribe</a><br/>
<br/>
<h1>subscribe</h1>
<a name="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.CoroutineContext, net.mamoe.mirai.event.Listener.ConcurrencyKind, net.mamoe.mirai.event.Listener.EventPriority, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)))"></a>
<code><span class="keyword">inline</span> <span class="keyword">fun </span><span class="symbol">&lt;</span><span class="keyword">reified</span>&nbsp;<span class="identifier">E</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../-event/index.html"><span class="identifier">Event</span></a><span class="symbol">&gt;</span> <span class="identifier">CoroutineScope</span><span class="symbol">.</span><span class="identifier">subscribe</span><span class="symbol">(</span><span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.CoroutineContext, net.mamoe.mirai.event.Listener.ConcurrencyKind, net.mamoe.mirai.event.Listener.EventPriority, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)))/coroutineContext">coroutineContext</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html"><span class="identifier">CoroutineContext</span></a>&nbsp;<span class="symbol">=</span>&nbsp;EmptyCoroutineContext<span class="symbol">, </span><span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.CoroutineContext, net.mamoe.mirai.event.Listener.ConcurrencyKind, net.mamoe.mirai.event.Listener.EventPriority, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)))/concurrency">concurrency</span><span class="symbol">:</span>&nbsp;<span class="identifier">ConcurrencyKind</span>&nbsp;<span class="symbol">=</span>&nbsp;LOCKED<span class="symbol">, </span><span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.CoroutineContext, net.mamoe.mirai.event.Listener.ConcurrencyKind, net.mamoe.mirai.event.Listener.EventPriority, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)))/priority">priority</span><span class="symbol">:</span>&nbsp;<span class="identifier">EventPriority</span>&nbsp;<span class="symbol">=</span>&nbsp;NORMAL<span class="symbol">, </span><span class="keyword">noinline</span> <span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.CoroutineContext, net.mamoe.mirai.event.Listener.ConcurrencyKind, net.mamoe.mirai.event.Listener.EventPriority, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)))/handler">handler</span><span class="symbol">:</span>&nbsp;<span class="keyword">suspend </span><span class="identifier">E</span><span class="symbol">.</span><span class="symbol">(</span><span class="identifier">E</span><span class="symbol">)</span>&nbsp;<span class="symbol">-&gt;</span>&nbsp;<a href="../-listening-status/index.html"><span class="identifier">ListeningStatus</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../-listener/index.html"><span class="identifier">Listener</span></a><span class="symbol">&lt;</span><span class="identifier">E</span><span class="symbol">&gt;</span></code>
<p>在指定的 <a href="#">协程作用域</a> 下创建一个事件监听器, 监听所有 <a href="subscribe.html#E">E</a> 及其子类事件.</p>
<p>每当 <a href="../broadcast.html">事件广播</a> 时, <a href="subscribe.html#net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.CoroutineContext, net.mamoe.mirai.event.Listener.ConcurrencyKind, net.mamoe.mirai.event.Listener.EventPriority, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)))/handler">handler</a> 都会被执行.</p>
<h3>创建监听</h3>
<p>调用本函数:</p>
<pre><code>coroutineScope.subscribe&lt;Event&gt; { /* 会收到来自全部 Bot 的事件和与 Bot 不相关的事件 */}
</code></pre>
<h3>生命周期</h3>
<h4>通过协程作用域管理监听器</h4>
<p>本函数将会创建一个 <a href="#">Job</a>, 成为 <a href="subscribe/-this-.html">this</a> 中的子任务. 可创建一个 <a href="#">CoroutineScope</a> 来管理所有的监听器:</p>
<pre><code>val scope = CoroutineScope(SupervisorJob())

scope.subscribeAlways&lt;MemberJoinEvent&gt; { /* ... */}
scope.subscribeAlways&lt;MemberMuteEvent&gt; { /* ... */}

scope.cancel() // 停止上文两个监听
</code></pre>
<p><strong>注意</strong>, 这个函数返回 <a href="../-listener/index.html">Listener</a>, 它是一个 <a href="#">CompletableJob</a>. 它会成为 <a href="#">CoroutineScope</a> 的一个 <a href="#">子任务</a></p>
<pre><code>runBlocking { // this: CoroutineScope
  subscribe&lt;Event&gt; { /* 一些处理 */} // 返回 Listener, 即 CompletableJob
}
// runBlocking 不会完结, 直到监听时创建的 `Listener` 被停止.
// 它可能通过 Listener.cancel() 停止, 也可能自行返回 ListeningStatus.Stopped 停止.
</code></pre>
<h4>在监听器内部停止后续监听</h4>
<p>当 <a href="subscribe.html#net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.CoroutineContext, net.mamoe.mirai.event.Listener.ConcurrencyKind, net.mamoe.mirai.event.Listener.EventPriority, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)))/handler">handler</a> 返回 <a href="../-listening-status/-s-t-o-p-p-e-d.html">ListeningStatus.STOPPED</a> 时停止监听.
或 <a href="#">Listener.complete</a> 后结束.</p>
<h3>子类监听</h3>
<p>监听父类事件, 也会同时监听其子类. 因此监听 <a href="../-event/index.html">Event</a> 即可监听所有类型的事件.</p>
<h3>异常处理</h3>
<p>事件处理时的 <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html">CoroutineContext</a> 为调用本函数时的 <a href="subscribe/-this-.html">receiver</a> 的 <a href="#">CoroutineScope.coroutineContext</a>.
因此:</p>
<ul><li>当参数 <a href="subscribe.html#net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.CoroutineContext, net.mamoe.mirai.event.Listener.ConcurrencyKind, net.mamoe.mirai.event.Listener.EventPriority, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)))/handler">handler</a> 处理抛出异常时, 将会按如下顺序寻找 <a href="#">CoroutineExceptionHandler</a> 处理异常:</li>
</ul>
<ol><li>参数 <a href="subscribe.html#net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.CoroutineContext, net.mamoe.mirai.event.Listener.ConcurrencyKind, net.mamoe.mirai.event.Listener.EventPriority, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)))/coroutineContext">coroutineContext</a></li>
<li>接收者 <a href="subscribe/-this-.html">this</a> 的 <a href="#">CoroutineScope.coroutineContext</a></li>
<li><a href="../broadcast.html">Event.broadcast</a> 调用者的 <a href="subscribe.html#net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.CoroutineContext, net.mamoe.mirai.event.Listener.ConcurrencyKind, net.mamoe.mirai.event.Listener.EventPriority, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)))/coroutineContext">coroutineContext</a></li>
<li>若事件为 <a href="../../net.mamoe.mirai.event.events/-bot-event/index.html">BotEvent</a>, 则从 <a href="../../net.mamoe.mirai.event.events/-bot-event/bot.html">BotEvent.bot</a> 获取到 <a href="../../net.mamoe.mirai/-bot/index.html">Bot</a>, 进而在 <a href="../../net.mamoe.mirai/-bot/coroutine-context.html">Bot.coroutineContext</a> 中寻找</li>
<li>若以上四个步骤均无法获取 <a href="#">CoroutineExceptionHandler</a>, 则使用 <a href="#">MiraiLogger.Companion</a> 通过日志记录. 但这种情况理论上不应发生.</li>
</ol>
<ul><li>事件处理时抛出异常不会停止监听器.</li>
<li>建议在事件处理中 (即 <a href="subscribe.html#net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.CoroutineContext, net.mamoe.mirai.event.Listener.ConcurrencyKind, net.mamoe.mirai.event.Listener.EventPriority, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)))/handler">handler</a> 里) 处理异常,
或在参数 <a href="subscribe.html#net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.CoroutineContext, net.mamoe.mirai.event.Listener.ConcurrencyKind, net.mamoe.mirai.event.Listener.EventPriority, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)))/coroutineContext">coroutineContext</a> 中添加 <a href="#">CoroutineExceptionHandler</a>.</li>
</ul>
<h3>Parameters</h3>
<p><a name="coroutineContext"></a>
<code>coroutineContext</code> - 给事件监听协程的额外的 <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html">CoroutineContext</a>.</p>
<p><a name="concurrency"></a>
<code>concurrency</code> - 并发类型. 查看 <a href="../-listener/-concurrency-kind/index.html">Listener.ConcurrencyKind</a></p>
<p><a name="priority"></a>
<code>priority</code> - 监听优先级，优先级越高越先执行</p>
<p><a name="handler"></a>
<code>handler</code> - 事件处理器. 在接收到事件时会调用这个处理器. 其返回值意义参考 <a href="../-listening-status/index.html">ListeningStatus</a>. 其异常处理参考上文</p>
<p><strong>Return</strong><br/>
监听器实例. 此监听器已经注册到指定事件上, 在事件广播时将会调用 <a href="subscribe.html#net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.CoroutineContext, net.mamoe.mirai.event.Listener.ConcurrencyKind, net.mamoe.mirai.event.Listener.EventPriority, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)))/handler">handler</a></p>
<p><strong>See Also</strong><br/>
<p><a href="../sync-from-event.html">syncFromEvent</a></p>
<p><a href="async-from-event.html">asyncFromEvent</a></p>
<p><a href="../next-event.html">nextEvent</a></p>
<p><a href="../select-messages.html">selectMessages</a></p>
<p><a href="../while-select-messages.html">whileSelectMessages</a></p>
<p><a href="subscribe-always.html">subscribeAlways</a></p>
<p><a href="subscribe-once.html">subscribeOnce</a></p>
<p><a href="#">subscribeMessages</a></p>
<p><a href="#">subscribeGroupMessages</a></p>
<p><a href="#">subscribeFriendMessages</a></p>
<p><a href="#">subscribeTempMessages</a></p>
</p>
<a name="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.reflect.KClass((net.mamoe.mirai.event.subscribe.E)), kotlin.coroutines.CoroutineContext, net.mamoe.mirai.event.Listener.ConcurrencyKind, net.mamoe.mirai.event.Listener.EventPriority, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)))"></a>
<code><span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">E</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../-event/index.html"><span class="identifier">Event</span></a><span class="symbol">&gt;</span> <span class="identifier">CoroutineScope</span><span class="symbol">.</span><span class="identifier">subscribe</span><span class="symbol">(</span><span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.reflect.KClass((net.mamoe.mirai.event.subscribe.E)), kotlin.coroutines.CoroutineContext, net.mamoe.mirai.event.Listener.ConcurrencyKind, net.mamoe.mirai.event.Listener.EventPriority, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)))/eventClass">eventClass</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class/index.html"><span class="identifier">KClass</span></a><span class="symbol">&lt;</span><span class="keyword">out</span>&nbsp;<span class="identifier">E</span><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.reflect.KClass((net.mamoe.mirai.event.subscribe.E)), kotlin.coroutines.CoroutineContext, net.mamoe.mirai.event.Listener.ConcurrencyKind, net.mamoe.mirai.event.Listener.EventPriority, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)))/coroutineContext">coroutineContext</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html"><span class="identifier">CoroutineContext</span></a>&nbsp;<span class="symbol">=</span>&nbsp;EmptyCoroutineContext<span class="symbol">, </span><span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.reflect.KClass((net.mamoe.mirai.event.subscribe.E)), kotlin.coroutines.CoroutineContext, net.mamoe.mirai.event.Listener.ConcurrencyKind, net.mamoe.mirai.event.Listener.EventPriority, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)))/concurrency">concurrency</span><span class="symbol">:</span>&nbsp;<span class="identifier">ConcurrencyKind</span>&nbsp;<span class="symbol">=</span>&nbsp;LOCKED<span class="symbol">, </span><span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.reflect.KClass((net.mamoe.mirai.event.subscribe.E)), kotlin.coroutines.CoroutineContext, net.mamoe.mirai.event.Listener.ConcurrencyKind, net.mamoe.mirai.event.Listener.EventPriority, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)))/priority">priority</span><span class="symbol">:</span>&nbsp;<span class="identifier">EventPriority</span>&nbsp;<span class="symbol">=</span>&nbsp;NORMAL<span class="symbol">, </span><span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.reflect.KClass((net.mamoe.mirai.event.subscribe.E)), kotlin.coroutines.CoroutineContext, net.mamoe.mirai.event.Listener.ConcurrencyKind, net.mamoe.mirai.event.Listener.EventPriority, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)))/handler">handler</span><span class="symbol">:</span>&nbsp;<span class="keyword">suspend </span><span class="identifier">E</span><span class="symbol">.</span><span class="symbol">(</span><span class="identifier">E</span><span class="symbol">)</span>&nbsp;<span class="symbol">-&gt;</span>&nbsp;<a href="../-listening-status/index.html"><span class="identifier">ListeningStatus</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../-listener/index.html"><span class="identifier">Listener</span></a><span class="symbol">&lt;</span><span class="identifier">E</span><span class="symbol">&gt;</span></code>
<p>与 <a href="./subscribe.html">CoroutineScope.subscribe</a> 的区别是接受 <a href="subscribe.html#net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.reflect.KClass((net.mamoe.mirai.event.subscribe.E)), kotlin.coroutines.CoroutineContext, net.mamoe.mirai.event.Listener.ConcurrencyKind, net.mamoe.mirai.event.Listener.EventPriority, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)))/eventClass">eventClass</a> 参数, 而不使用 <code>reified</code> 泛型</p>
<p><strong>See Also</strong><br/>
<p><a href="./subscribe.html">CoroutineScope.subscribe</a></p>
</p>
<p><strong>Return</strong><br/>
监听器实例. 此监听器已经注册到指定事件上, 在事件广播时将会调用 <a href="subscribe.html#net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.reflect.KClass((net.mamoe.mirai.event.subscribe.E)), kotlin.coroutines.CoroutineContext, net.mamoe.mirai.event.Listener.ConcurrencyKind, net.mamoe.mirai.event.Listener.EventPriority, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)))/handler">handler</a></p>
<a name="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.Function1((net.mamoe.mirai.event.subscribe.E, net.mamoe.mirai.event.ListeningStatus)), net.mamoe.mirai.event.Listener.EventPriority, net.mamoe.mirai.event.Listener.ConcurrencyKind, kotlin.coroutines.CoroutineContext)"></a>
<code><span class="identifier">@JvmName</span><span class="symbol">(</span>"subscribe1"<span class="symbol">)</span> <span class="keyword">inline</span> <span class="keyword">fun </span><span class="symbol">&lt;</span><span class="keyword">reified</span>&nbsp;<span class="identifier">E</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../-event/index.html"><span class="identifier">Event</span></a><span class="symbol">&gt;</span> <span class="identifier">CoroutineScope</span><span class="symbol">.</span><span class="identifier">subscribe</span><span class="symbol">(</span><span class="keyword">crossinline</span> <span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.Function1((net.mamoe.mirai.event.subscribe.E, net.mamoe.mirai.event.ListeningStatus)), net.mamoe.mirai.event.Listener.EventPriority, net.mamoe.mirai.event.Listener.ConcurrencyKind, kotlin.coroutines.CoroutineContext)/handler">handler</span><span class="symbol">:</span>&nbsp;<span class="symbol">(</span><span class="identifier">E</span><span class="symbol">)</span>&nbsp;<span class="symbol">-&gt;</span>&nbsp;<a href="../-listening-status/index.html"><span class="identifier">ListeningStatus</span></a><span class="symbol">, </span><span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.Function1((net.mamoe.mirai.event.subscribe.E, net.mamoe.mirai.event.ListeningStatus)), net.mamoe.mirai.event.Listener.EventPriority, net.mamoe.mirai.event.Listener.ConcurrencyKind, kotlin.coroutines.CoroutineContext)/priority">priority</span><span class="symbol">:</span>&nbsp;<span class="identifier">EventPriority</span>&nbsp;<span class="symbol">=</span>&nbsp;NORMAL<span class="symbol">, </span><span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.Function1((net.mamoe.mirai.event.subscribe.E, net.mamoe.mirai.event.ListeningStatus)), net.mamoe.mirai.event.Listener.EventPriority, net.mamoe.mirai.event.Listener.ConcurrencyKind, kotlin.coroutines.CoroutineContext)/concurrency">concurrency</span><span class="symbol">:</span>&nbsp;<span class="identifier">ConcurrencyKind</span>&nbsp;<span class="symbol">=</span>&nbsp;CONCURRENT<span class="symbol">, </span><span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.Function1((net.mamoe.mirai.event.subscribe.E, net.mamoe.mirai.event.ListeningStatus)), net.mamoe.mirai.event.Listener.EventPriority, net.mamoe.mirai.event.Listener.ConcurrencyKind, kotlin.coroutines.CoroutineContext)/coroutineContext">coroutineContext</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html"><span class="identifier">CoroutineContext</span></a>&nbsp;<span class="symbol">=</span>&nbsp;EmptyCoroutineContext<span class="symbol">)</span><span class="symbol">: </span><a href="../-listener/index.html"><span class="identifier">Listener</span></a><span class="symbol">&lt;</span><span class="identifier">E</span><span class="symbol">&gt;</span></code>
<p>支持 Kotlin 带接收者的挂起函数的函数引用的监听方式.</p>
<pre><code>fun onMessage(event: GroupMessageEvent): ListeningStatus {
    return ListeningStatus.LISTENING
}

scope.subscribe(::onMessage)
</code></pre><a name="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.Function2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)), net.mamoe.mirai.event.Listener.EventPriority, net.mamoe.mirai.event.Listener.ConcurrencyKind, kotlin.coroutines.CoroutineContext)"></a>
<code><span class="identifier">@JvmName</span><span class="symbol">(</span>"subscribe2"<span class="symbol">)</span> <span class="keyword">inline</span> <span class="keyword">fun </span><span class="symbol">&lt;</span><span class="keyword">reified</span>&nbsp;<span class="identifier">E</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../-event/index.html"><span class="identifier">Event</span></a><span class="symbol">&gt;</span> <span class="identifier">CoroutineScope</span><span class="symbol">.</span><span class="identifier">subscribe</span><span class="symbol">(</span><span class="keyword">crossinline</span> <span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.Function2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)), net.mamoe.mirai.event.Listener.EventPriority, net.mamoe.mirai.event.Listener.ConcurrencyKind, kotlin.coroutines.CoroutineContext)/handler">handler</span><span class="symbol">:</span>&nbsp;<span class="identifier">E</span><span class="symbol">.</span><span class="symbol">(</span><span class="identifier">E</span><span class="symbol">)</span>&nbsp;<span class="symbol">-&gt;</span>&nbsp;<a href="../-listening-status/index.html"><span class="identifier">ListeningStatus</span></a><span class="symbol">, </span><span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.Function2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)), net.mamoe.mirai.event.Listener.EventPriority, net.mamoe.mirai.event.Listener.ConcurrencyKind, kotlin.coroutines.CoroutineContext)/priority">priority</span><span class="symbol">:</span>&nbsp;<span class="identifier">EventPriority</span>&nbsp;<span class="symbol">=</span>&nbsp;NORMAL<span class="symbol">, </span><span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.Function2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)), net.mamoe.mirai.event.Listener.EventPriority, net.mamoe.mirai.event.Listener.ConcurrencyKind, kotlin.coroutines.CoroutineContext)/concurrency">concurrency</span><span class="symbol">:</span>&nbsp;<span class="identifier">ConcurrencyKind</span>&nbsp;<span class="symbol">=</span>&nbsp;CONCURRENT<span class="symbol">, </span><span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.Function2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)), net.mamoe.mirai.event.Listener.EventPriority, net.mamoe.mirai.event.Listener.ConcurrencyKind, kotlin.coroutines.CoroutineContext)/coroutineContext">coroutineContext</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html"><span class="identifier">CoroutineContext</span></a>&nbsp;<span class="symbol">=</span>&nbsp;EmptyCoroutineContext<span class="symbol">)</span><span class="symbol">: </span><a href="../-listener/index.html"><span class="identifier">Listener</span></a><span class="symbol">&lt;</span><span class="identifier">E</span><span class="symbol">&gt;</span></code>
<p>支持 Kotlin 带接收者的函数的函数引用的监听方式.</p>
<pre><code>fun GroupMessageEvent.onMessage(event: GroupMessageEvent): ListeningStatus {
    return ListeningStatus.LISTENING
}

scope.subscribe(GroupMessageEvent::onMessage)
</code></pre><a name="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.SuspendFunction1((net.mamoe.mirai.event.subscribe.E, net.mamoe.mirai.event.ListeningStatus)), net.mamoe.mirai.event.Listener.EventPriority, net.mamoe.mirai.event.Listener.ConcurrencyKind, kotlin.coroutines.CoroutineContext)"></a>
<code><span class="identifier">@JvmName</span><span class="symbol">(</span>"subscribe1"<span class="symbol">)</span> <span class="keyword">inline</span> <span class="keyword">fun </span><span class="symbol">&lt;</span><span class="keyword">reified</span>&nbsp;<span class="identifier">E</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../-event/index.html"><span class="identifier">Event</span></a><span class="symbol">&gt;</span> <span class="identifier">CoroutineScope</span><span class="symbol">.</span><span class="identifier">subscribe</span><span class="symbol">(</span><span class="keyword">crossinline</span> <span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.SuspendFunction1((net.mamoe.mirai.event.subscribe.E, net.mamoe.mirai.event.ListeningStatus)), net.mamoe.mirai.event.Listener.EventPriority, net.mamoe.mirai.event.Listener.ConcurrencyKind, kotlin.coroutines.CoroutineContext)/handler">handler</span><span class="symbol">:</span>&nbsp;<span class="keyword">suspend </span><span class="symbol">(</span><span class="identifier">E</span><span class="symbol">)</span>&nbsp;<span class="symbol">-&gt;</span>&nbsp;<a href="../-listening-status/index.html"><span class="identifier">ListeningStatus</span></a><span class="symbol">, </span><span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.SuspendFunction1((net.mamoe.mirai.event.subscribe.E, net.mamoe.mirai.event.ListeningStatus)), net.mamoe.mirai.event.Listener.EventPriority, net.mamoe.mirai.event.Listener.ConcurrencyKind, kotlin.coroutines.CoroutineContext)/priority">priority</span><span class="symbol">:</span>&nbsp;<span class="identifier">EventPriority</span>&nbsp;<span class="symbol">=</span>&nbsp;NORMAL<span class="symbol">, </span><span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.SuspendFunction1((net.mamoe.mirai.event.subscribe.E, net.mamoe.mirai.event.ListeningStatus)), net.mamoe.mirai.event.Listener.EventPriority, net.mamoe.mirai.event.Listener.ConcurrencyKind, kotlin.coroutines.CoroutineContext)/concurrency">concurrency</span><span class="symbol">:</span>&nbsp;<span class="identifier">ConcurrencyKind</span>&nbsp;<span class="symbol">=</span>&nbsp;CONCURRENT<span class="symbol">, </span><span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.SuspendFunction1((net.mamoe.mirai.event.subscribe.E, net.mamoe.mirai.event.ListeningStatus)), net.mamoe.mirai.event.Listener.EventPriority, net.mamoe.mirai.event.Listener.ConcurrencyKind, kotlin.coroutines.CoroutineContext)/coroutineContext">coroutineContext</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html"><span class="identifier">CoroutineContext</span></a>&nbsp;<span class="symbol">=</span>&nbsp;EmptyCoroutineContext<span class="symbol">)</span><span class="symbol">: </span><a href="../-listener/index.html"><span class="identifier">Listener</span></a><span class="symbol">&lt;</span><span class="identifier">E</span><span class="symbol">&gt;</span></code>
<p>支持 Kotlin 挂起函数的函数引用的监听方式.</p>
<pre><code>suspend fun onMessage(event: GroupMessageEvent): ListeningStatus {
    return ListeningStatus.LISTENING
}

scope.subscribe(::onMessage)
</code></pre><a name="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)), net.mamoe.mirai.event.Listener.EventPriority, net.mamoe.mirai.event.Listener.ConcurrencyKind, kotlin.coroutines.CoroutineContext)"></a>
<code><span class="identifier">@JvmName</span><span class="symbol">(</span>"subscribe3"<span class="symbol">)</span> <span class="keyword">inline</span> <span class="keyword">fun </span><span class="symbol">&lt;</span><span class="keyword">reified</span>&nbsp;<span class="identifier">E</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../-event/index.html"><span class="identifier">Event</span></a><span class="symbol">&gt;</span> <span class="identifier">CoroutineScope</span><span class="symbol">.</span><span class="identifier">subscribe</span><span class="symbol">(</span><span class="keyword">crossinline</span> <span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)), net.mamoe.mirai.event.Listener.EventPriority, net.mamoe.mirai.event.Listener.ConcurrencyKind, kotlin.coroutines.CoroutineContext)/handler">handler</span><span class="symbol">:</span>&nbsp;<span class="keyword">suspend </span><span class="identifier">E</span><span class="symbol">.</span><span class="symbol">(</span><span class="identifier">E</span><span class="symbol">)</span>&nbsp;<span class="symbol">-&gt;</span>&nbsp;<a href="../-listening-status/index.html"><span class="identifier">ListeningStatus</span></a><span class="symbol">, </span><span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)), net.mamoe.mirai.event.Listener.EventPriority, net.mamoe.mirai.event.Listener.ConcurrencyKind, kotlin.coroutines.CoroutineContext)/priority">priority</span><span class="symbol">:</span>&nbsp;<span class="identifier">EventPriority</span>&nbsp;<span class="symbol">=</span>&nbsp;NORMAL<span class="symbol">, </span><span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)), net.mamoe.mirai.event.Listener.EventPriority, net.mamoe.mirai.event.Listener.ConcurrencyKind, kotlin.coroutines.CoroutineContext)/concurrency">concurrency</span><span class="symbol">:</span>&nbsp;<span class="identifier">ConcurrencyKind</span>&nbsp;<span class="symbol">=</span>&nbsp;CONCURRENT<span class="symbol">, </span><span class="identifier" id="net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)), net.mamoe.mirai.event.Listener.EventPriority, net.mamoe.mirai.event.Listener.ConcurrencyKind, kotlin.coroutines.CoroutineContext)/coroutineContext">coroutineContext</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html"><span class="identifier">CoroutineContext</span></a>&nbsp;<span class="symbol">=</span>&nbsp;EmptyCoroutineContext<span class="symbol">)</span><span class="symbol">: </span><a href="../-listener/index.html"><span class="identifier">Listener</span></a><span class="symbol">&lt;</span><span class="identifier">E</span><span class="symbol">&gt;</span></code>
<p>支持 Kotlin 带接收者的挂起函数的函数引用的监听方式.</p>
<pre><code>suspend fun GroupMessageEvent.onMessage(event: GroupMessageEvent): ListeningStatus {
    return ListeningStatus.LISTENING
}

scope.subscribe(GroupMessageEvent::onMessage)
</code></pre>
</BODY>
</HTML>
